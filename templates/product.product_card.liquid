{% layout none %}
{% assign product_card_image = product.featured_image | default: product.selected_or_first_available_variant.featured_image
%}
<custom-product-card class="product-card-container" data-variant-details='{{ product.variants | json }}'>
  <div class="hotspot-product-top-wrapper">
    {% if product_card_image %}
      <div class="product-card-image-wrapper">
        <img
          src="{{ product_card_image | image_url }}"
          width="100%"
          height="100%"
          alt="{{ product_card_image.alt | default:product.title | escape }}"
          class="product-card-image"
        />
      </div>
    {% endif %}
    <div class="product-card-text-wrapper">
      {% if product.title %}
        <h2 class="product-card-title">
          {{ product.title }}
        </h2>
      {% endif %}
      {% render 'product-card-price', product: product %}
      {% if product.description != blank %}
        <div class="product-card-description">{{ product.description }}</div>
      {% endif %}
    </div>
  </div>
  <div class="hotspot-product-bottom-wrapper">
    {% render 'product-card-variants', product: product %}
    <div class="product-card-error-message-container visibility-hidden">
      <span class="error-message-text">{{ 'sections.hotspot.error_message' | t }}</span>
    </div>
    {%- assign product_form_id = 'product-form-{{ product.handle }}' -%}
    {%- form 'product',
      product,
      id: product_form_id,
      class: 'form',
      novalidate: 'novalidate',
      data-type: 'add-to-cart-form'
    -%}
      <input
        type="hidden"
        name="id"
        value=""
        class="product-variant-id"
      >
      <button
        id="{{ product_form_id }}-submit"
        type="submit"
        name="add"
        class="button button--full-width add-to-cart-button"
        aria-labelledby="{{ product_form_id }}-submit"
      >
        <p class="add-to-cart-text">
          <span>
            {{ 'products.product.add_to_cart' | t }}
          </span>
          <span class="add-to-cart-arrow">
            {% render 'icons', icon_name : 'arrow_icon' %}
          </span>
        </p>
        <span class="sold-out-message hidden">
          {{ 'products.product.sold_out' | t }}
        </span>
        {%- render 'loading-spinner' -%}
      </button>
    {%- endform -%}
  </div>
</custom-product-card>